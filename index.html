<!DOCTYPE html>
<html>

<head>
    <title>wnr</title>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Type" content="text/html" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimal-ui" />
    <script>if (typeof module === 'object') { window.module = module; module = undefined; }</script>
    <!-- solve the electron-jquery conflict -->
    <script src="res/lib/jquery-3.3.1.min.js"></script>
    <script src="res/lib/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="res/lib/bootstrap.min.css" />
    <script src="res/lib/all.js"></script>
    <script src="res/lib/v4-shims.js"></script><!-- font-awesome 5 use as 4 -->
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body onpaste="return false">
    <!-- prevent people from pasting abnormal content -->
    <script src="renderer.js"></script>
    <script src="updater.js"></script>
    <script>
        function about() {
            ipc.send("about");
        }
        function settings() {
            ipc.send("settings");
        }
        function winhider() {
            ipc.send("winhider");
        }
        function minimizer() {
            ipc.send("minimizer");
        }
        function keydown(e) {
            var currKey = 0, e = e || event;
            if (e.keyCode == 13) {
                window.location.href = "timer.html?title=" + $("#title").val() + "&work-time=" + $("#work-time").val() + "&rest-time=" + $("#rest-time").val() + "&loop=" + $("#loop").val();
            }
        }
        document.onkeydown = keydown;
    </script>
    <div class="d-flex mx-auto justify-content-center align-items-center text-dark" id="main">
        <div id="controller">
            <a href="javascript:settings()" class="small rest"><i class="fa fa-cog fa-fw"
                    id="settings"></i></a>&nbsp;&nbsp;
            <a href="javascript:about()" class="small rest"><i class="fa fa-info fa-fw" id="info"></i></a>&nbsp;&nbsp;
            <a href="javascript:winhider()" class="small rest" id="win-hider"><i class="fa fa-sort-desc fa-fw"
                    id="winhider"></i></a><span id="no-use-space">&nbsp;&nbsp;</span>
            <a href="javascript:minimizer()" class="small rest"><i class="fa fa-minus fa-fw"
                    id="minimizer"></i></a>&nbsp;&nbsp;
            <a href="javascript:window.close()" class="small rest"><i class="fa fa-times fa-fw" id="exit"></i></a>
            <script>
                $('#settings').attr('title', i18n.__('settings'));
                $('#info').attr('title', i18n.__('info'));
                $('#winhider').attr('title', i18n.__('winhider'));
                $('#minimizer').attr('title', i18n.__('minimizer'));
                $('#exit').attr('title', i18n.__('exit'));
            </script>
        </div>
        <div id="tip" class="small font-weight-bold text-black-50">
            <script>document.write(i18n.__('tip'));</script>
        </div>
        <div id="set" class="justify-content-center">
            <form action="timer.html" method="GET">
                <input name="title" id="title" type="text" class="small" maxlength="14" /><br /><br />
                <input name="work-time" id="work-time" type="number"
                    onkeypress="return (/[0-9]/.test(String.fromCharCode(event.keyCode)))" style="ime-mode:Disabled"
                    class="work lead" autofocus required /><br /><br />
                <input name="rest-time" id="rest-time" type="number"
                    onkeypress="return (/[0-9]/.test(String.fromCharCode(event.keyCode)))" style="ime-mode:Disabled"
                    class="rest lead" required /><br /><br />
                <input name="loop" id="loop" type="number"
                    onkeypress="return (/[0-9]/.test(String.fromCharCode(event.keyCode)))" style="ime-mode:Disabled"
                    class="small" required /><br /><!-- control that only numbers are OK -->
            </form>
            <script>
                $('#work-time').attr('placeholder', i18n.__('worktime'));
                $('#title').attr('placeholder', i18n.__('title'));
                $('#rest-time').attr('placeholder', i18n.__('resttime'));
                $('#loop').attr('placeholder', i18n.__('loop'));
                $("input").mouseenter(function () {
                    $("#tip").css('opacity', '1');
                });
                $("input").mouseleave(function () {
                    $("#tip").css('opacity', '0');
                });
            </script>
        </div>
    </div>
    <script>
        isTimerWindow(false);
        $("#work-time").val(store.get("worktime"));
        $("#rest-time").val(store.get("resttime"));
        $("#loop").val(store.get("looptime"));
        if (process.platform == "darwin") {
            $("#win-hider").css("display", "none");
            $("#no-use-space").css("display", "none");
        }
    </script>
</body>

</html>